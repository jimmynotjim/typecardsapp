(function(e){e.typecards=function(){var t={menuState:"closed",speed:.25,vpHeight:function(){return e(window).height()},conHeight:function(){var n=e(".main-app").height();return n===0?t.vpHeight():n},margTop:function(){return t.conHeight()>300?(t.conHeight()-300)*.5:0},offSet:function(){return t.conHeight()<600?t.conHeight()*.85:t.conHeight()*.9},setAppStyles:function(){var n=".main{height:"+t.conHeight()+"px;} .character{margin-top:"+t.margTop()+"px;}";e("#app-styles").length===0?e("head").append('<style id="app-styles">'+n+"</style>"):e("#app-styles").html(n)},initiateResizeListener:function(){e(window).resize(function(){t.setAppStyles();t.menuState==="open"&&t.openMenu()})},isOpen:function(){return t.menuState==="open"?!0:!1},showMenu:function(n){var r=t.addAnimations(n),i=t.translateOpen();e("#anatomy_slider").attr("style",i+r)},hideMenu:function(n){var r=t.addAnimations(n),i=t.translateClosed();e("#anatomy_slider").attr("style",i+r)},addAnimations:function(e){return"-webkit-transition: all "+e+"s ease-out;-moz-transition: all "+e+"s ease-out;transition:all "+e+"s ease-out;"},translateOpen:function(){return"-webkit-transform:translate3d(0,-"+t.offSet()+"px,0); -moz-transform:translate3d(0,-"+t.offSet()+"px,0); transform:translate3d(0,-"+t.offSet()+"px,0);"},translateClosed:function(){return"-webkit-transform:translate3d(0,0,0); -moz-transform:translate3d(0,0,0); transform:translate3d(0,0,0);"},removeAnimations:function(n){var r=t.menuState==="open"?t.translateOpen():t.translateClosed();setTimeout(function(){e("#anatomy_slider").attr("style",r)},n*1e3)},openMenu:function(e){t.menuState="open";t.showMenu(e);t.removeAnimations(e)},closeMenu:function(e){t.menuState="closed";t.hideMenu(e);t.removeAnimations(e)},triggerMenu:function(){t.menuState==="open"?t.closeMenu(t.speed):t.openMenu(t.speed)},flipCard:function(t){var n=e(t).closest(".card");n.toggleClass("flipped")},isMenuTrigger:function(t){var n=e(".menu-btn, #all-cards");return t.closest(n).length?!0:!1},isInstTrigger:function(t){var n=e("#inst-button");return t.closest(n).length?!0:!1},isAboutTrigger:function(t){var n=e("#about-button");return t.closest(n).length?!0:!1},isFlipTrigger:function(e){return e.closest("#anatomy_slider .card-body").length?!0:!1},initiateClickListeners:function(){e("body").on("click",function(n){var r=e(n.target);if(t.isMenuTrigger(r)){n.preventDefault();t.triggerMenu(.5)}else if(t.isInstTrigger(r)){n.preventDefault();e("#instructions").addClass("active");e("#about").removeClass("active")}else if(t.isAboutTrigger(r)){n.preventDefault();e("#about").addClass("active");e("#instructions").removeClass("active")}else if(t.isFlipTrigger(r)){n.preventDefault();t.menuState==="closed"?t.flipCard(r):t.closeMenu(.5)}})},initiateTouchListeners:function(){var n,r,i,s,o,u,a,f=t.speed*.5;e(".menu-btn").on("touchstart",function(e){n=event.touches[0];r=n.pageY;i=r;e.preventDefault()});e(".menu-btn").on("touchmove",function(u){n=event.touches[0];i=n.pageY;s=i-r;var f;if(s>0){o=s;a="translate3d(0,-"+(t.offSet()-o)+"px,0)"}else{o=s*-1;a="translate3d(0,-"+o+"px,0)"}if(i<t.offSet()&&s>0&&t.menuState==="open"){f="-webkit-transform:"+a+"; -moz-transform:"+a+"; ransform:"+a+";";e("#anatomy_slider").attr("style",f)}else if(s<0&&i>t.conHeight()-t.offSet()&&t.menuState==="closed"){f="-webkit-transform:"+a+"; -moz-transform:"+a+"; ransform:"+a+";";e("#anatomy_slider").attr("style",f)}u.preventDefault()});e(".menu-btn").on("touchend",function(){u=i;t.menuState==="closed"?u===r?t.openMenu(t.speed):o>80?t.openMenu(f):t.closeMenu(f):t.menuState==="open"&&(u===r?t.closeMenu(t.speed):o>80?t.closeMenu(f):t.openMenu(f))})},init:function(){t.setAppStyles();t.initiateResizeListener();t.initiateClickListeners();t.initiateTouchListeners();setTimeout(function(){t.openMenu(.5)},5)}};return{on:t.init,trigger:t.triggerMenu,open:t.openMenu,close:t.closeMenu}}})(jQuery);